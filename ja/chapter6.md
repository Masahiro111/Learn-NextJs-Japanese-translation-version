# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ã®ä½œæ¥­ã‚’ç¶šã‘ã‚‹å‰ã«ã€ã„ãã¤ã‹ã®ãƒ‡ãƒ¼ã‚¿ãŒå¿…è¦ã§ã™ã€‚ã“ã®ç« ã§ã¯ã€`@vercel/postgres` ã‚’ä½¿ç”¨ã—ã¦ PostgreSQL ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã—ã¾ã™ã€‚ã™ã§ã« PostgreSQL ã«æ…£ã‚Œã¦ã„ã¦ã€ç‹¬è‡ªã®ãƒ—ãƒ­ãƒã‚¤ãƒ€ã‚’ä½¿ç”¨ã—ãŸã„å ´åˆã¯ã€ã“ã®ç« ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦è‡ªåˆ†ã§è¨­å®šã—ã¦ã‚‚ã‹ã¾ã„ã¾ã›ã‚“ã€‚ãã‚Œä»¥å¤–ã®å ´åˆã¯ã€ç¶šã‘ã¾ã—ã‚‡ã†!

ã“ã®ç« ã§å–ã‚Šä¸Šã’ã‚‹ãƒˆãƒ”ãƒƒã‚¯ã¯ä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ã€‚

- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ GitHub ã«ãƒ—ãƒƒã‚·ãƒ¥ã—ã¾ã™
- Vercel ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’è¨­å®šã—ã€GitHub ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒªãƒ³ã‚¯ã—ã¦ã€ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚„ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’è¡Œãˆã‚‹ã‚ˆã†ã«ã—ã¾ã™
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã€Postgres ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ãƒªãƒ³ã‚¯ã—ã¾ã™
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«åˆæœŸãƒ‡ãƒ¼ã‚¿ã‚’ã‚·ãƒ¼ãƒ‰ã—ã¾ã™

## GitHub ãƒªãƒã‚¸ãƒˆãƒªã®ä½œæˆ

ã¾ã ãƒªãƒã‚¸ãƒˆãƒªã‚’ Github ã«ãƒ—ãƒƒã‚·ãƒ¥ã—ã¦ã„ãªã„å ´åˆã¯ã€ãƒªãƒã‚¸ãƒˆãƒªã‚’ Github ã«ãƒ—ãƒƒã‚·ãƒ¥ã—ã¾ã—ã‚‡ã†ã€‚ãã†ã™ã‚‹ã“ã¨ã§ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¨ãƒ‡ãƒ—ãƒ­ã‚¤ãŒç°¡å˜ã«ãªã‚Šã¾ã™ã€‚

ãƒªãƒã‚¸ãƒˆãƒªã®è¨­å®šã«é–¢ã™ã‚‹ãƒ˜ãƒ«ãƒ—ãŒå¿…è¦ãªå ´åˆã¯ã€[GitHub ã®ã“ã®ã‚¬ã‚¤ãƒ‰](https://help.github.com/en/github/getting-started-with-github/create-a-repo) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

> **ã‚³ãƒ©ãƒ ** :
>
> - GitLab ã‚„ Bitbucket ãªã©ã®ä»–ã® Git ãƒ—ãƒ­ãƒã‚¤ãƒ€ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™
> - GitHub ã‚’åˆã‚ã¦ä½¿ç”¨ã™ã‚‹å ´åˆã¯ã€é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ç°¡ç´ åŒ–ã§ãã‚‹ [GitHub ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒª](https://desktop.github.com/) ã‚’ãŠå‹§ã‚ã—ã¾ã™

## Vercel ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ä½œæˆ

[vercel.com/signup](https://vercel.com/signup) ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚ç„¡æ–™ã®ã€Œhobbyã€ãƒ—ãƒ©ãƒ³ã‚’é¸æŠžã—ã¦ãã ã•ã„ã€‚[**Continue with GitHub**] ã‚’é¸æŠžã—ã¦ã€GitHub ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¨ Vercel ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’æŽ¥ç¶šã—ã¾ã™ã€‚

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æŽ¥ç¶šã¨ãƒ‡ãƒ—ãƒ­ã‚¤

æ¬¡ã«ã€å…ˆã»ã©ä½œæˆã—ãŸ GitHub ãƒªãƒã‚¸ãƒˆãƒªã‚’é¸æŠžã—ã¦ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

![ãƒ¦ãƒ¼ã‚¶ãƒ¼ã® GitHub ãƒªãƒã‚¸ãƒˆãƒªã®ãƒªã‚¹ãƒˆã‚’å«ã‚€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆç”»é¢ã‚’ç¤ºã™ Vercel ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ](/_images/import-git-repo.avif)

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«åå‰ã‚’ä»˜ã‘ã¦ã€[**Deploy**] ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚

![ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨ Deploy ãƒœã‚¿ãƒ³ã‚’ç¤ºã™ãƒ‡ãƒ—ãƒ­ã‚¤ç”»é¢](/_images/configure-project.avif)

ã‚„ã‚Šã¾ã—ãŸï¼ ðŸŽ‰ ã“ã‚Œã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã¾ã—ãŸã€‚

![Project overview screen showing the project name, domain, and deployment status](/_images/deployed-project.avif)

By connecting your GitHub repository, whenever you push changes to your **main** branch, Vercel will automatically redeploy your application with no configuration needed. When opening pull requests, you'll also have [instant previews](https://vercel.com/docs/deployments/preview-deployments#preview-urls) which allow you to catch deployment errors early and share a preview of your project with team members for feedback.

## Create a Postgres database

Next, to set up a database, click **Continue to Dashboard** and select the **Storage** tab from your project dashboard. Select **Connect Store â†’ Create New â†’ Postgres â†’ Continue**.

![Connect Store screen showing the Postgres option along with KV, Blob and Edge Config](/_images/create-database.avif)

Accept the terms, assign a name to your database, and ensure your database region is set to **Washington D.C (iad1)** - this is also the [default region](https://vercel.com/docs/functions/serverless-functions/regions#select-a-default-serverless-region) for all new Vercel projects. By placing your database in the same region or close to your application code, you can reduce [latency](https://developer.mozilla.org/en-US/docs/Web/Performance/Understanding_latency) for data requests.

![Database creation modal showing the database name and region](/_images/database-region.avif)

> **Good to know** :
> You cannot change the database region once it has been initalized. If you wish to use a different [region](https://vercel.com/docs/storage/vercel-postgres/limits#supported-regions), you should set it before creating a database.

Once connected, navigate to the `.env.local` tab, click `Show secret` and `Copy Snippet`. Make sure you reveal the secrets before copying them.

![The .env.local tab showing the hidden database secrets](/_images/database-dashboard.avif)

Navigate to your code editor and rename the `.env.example` file to `.env`. Paste in the copied contents from Vercel.

**Important**: Go to your `.gitignore` file and make sure `.env` is in the ignored files to prevent your database secrets from being exposed when you push to GitHub.

Finally, run `npm i @vercel/postgres` in your terminal to install the [Vercel Postgres SDK](https://vercel.com/docs/storage/vercel-postgres/sdk).

## Seed your database

Now that your database has been created, let's seed it with some initial data. This will allow you to have some data to work with as you build the dashboard.

In the `/scripts` folder of your project, there's a file called `seed.js`. This script contains the instructions for creating and seeding the `invoices`, `customers`, `user`, `revenue` tables.

Don't worry if you don't understand everything the code is doing, but to give you an overview, the script uses **SQL** to create the tables, and the data from `placeholder-data.js` file to populate them after they've been created.

Next, in your `package.json` file, add the following line to your scripts:

`/package.json`

```json diff
  "scripts": {
    "build": "next build",
    "dev": "next dev",
    "start": "next start",
+   "seed": "node -r dotenv/config ./scripts/seed.js"
  },
```

This is the command that will execute `seed.js`.

Now, run `npm run seed`. You should see some `console.log` messages in your terminal to let you know the script is running.

> **Troubleshooting** :
> Make sure to reveal your database secrets before copying it into your `.env` file.
> The script uses bcrypt to hash the user's password, if `bcrypt` isn't compatible with your environment, you can update the script to use [bcryptjs](https://www.npmjs.com/package/bcryptjs) instead.
> If you run into any issues while seeding your database and want to run the script again, you can drop any existing tables by running DROP TABLE tablename in your database query interface. See the [executing queries section](https://nextjs.org/learn/dashboard-app/setting-up-your-database#executing-queries) below for more details. But be careful, this command will delete the tables and all their data. It's ok to do this with your example app since you're working with placeholder data, but you shouldn't run this command in a production app.
> If you continue to experience issues while seeding your Vercel Postgres database, please open a [discussion on GitHub](https://github.com/vercel/next-learn/issues).

## Exploring your database

Let's see what your database looks like. Go back to Vercel, and click Data on the sidenav.

In this section, you'll find the four new tables: users, customers, invoices, and revenue.

![Database screen showing dropdown list with four tables: users, customers, invoices, and revenue](/_images/database-tables.avif)

By selecting each table, you can view its records and ensure the entries align with the data from placeholder-data.js file.

## Executing queries

You can switch to the "query" tab to interact with your database. This section supports standard SQL commands. For instance, inputting DROP TABLE customers will delete "customers" table along with all its data - so be careful!

Let's run your first database query. Paste and run the following SQL code into the Vercel interface:

```sql
SELECT invoices.amount, customers.name
FROM invoices
JOIN customers ON invoices.customer_id = customers.id
WHERE invoices.amount = 666;
```
